{"version":3,"file":"index.umd.js","sources":["index.js"],"sourcesContent":["import{Plugin as e}from\"ckeditor5\";class t extends e{static get pluginName(){return\"MaximumLength\"}static get requires(){return[\"WordCount\"]}init(){const e=this.editor,t=e.plugins.get(\"WordCount\"),r=e.config.get(\"maximumLength.characters\");let i=!1;e.model.document.registerPostFixer((e=>{const s=t.characters,n=this._calculateExcessRange(r,s);n?i?e.updateMarker(\"maximumLengthExcess\",{range:n,usingOperation:!1}):(e.addMarker(\"maximumLengthExcess\",{range:n,usingOperation:!1}),i=!0):i&&(e.removeMarker(\"maximumLengthExcess\"),i=!1)})),e.conversion.for(\"editingDowncast\").markerToHighlight({model:\"maximumLengthExcess\",view:{classes:\"ck-maximum-length-excess\"}})}_calculateExcessRange(e,t){if(e>t)return null;const r=this.editor,i=r.model.createRangeIn(r.model.document.getRoot()).getWalker({singleCharacters:!0,direction:\"backward\"});let s,n,a=t;for(const t of i)if(\"text\"==t.type&&(s||(s=t.previousPosition),a--,a<e))return n=t.previousPosition,r.model.createRange(n,s)}}export{t as MaximumLength};\n//# sourceMappingURL=index.js.map\n"],"names":["e"],"mappings":";;;;;;CAAmC,MAAM,CAAC,SAASA,gBAAC,CAAC,WAAW,UAAU,EAAE,CAAC,OAAM,eAAe,CAAC,WAAW,QAAQ,EAAE,CAAC,OAAM,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,iBAAiB,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,qBAAqB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,qBAAqB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,iBAAiB,CAAC,CAAC,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,0BAA0B,CAAC,CAAC,EAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,EAAE,CAAC,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;;;;;;;"}